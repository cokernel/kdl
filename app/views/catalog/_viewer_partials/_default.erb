<% unless @document.has_key?('unpaged_display') %>
<% extra_head_content << capture do %>
<script src="http://maps.google.com/maps?file=api&amp;v=2.x&amp;key=ABQIAAAANZhE12_nSwoiEeOrTR9VFRRP8KZ0B-_Pw6waNKIP-bVwSDZSmxRlrMqG5WEDK9-gF1vxqf7vMfIAyQ" type="text/javascript"></script>
<script src="/gmapviewer/resources/elabel.js" type="text/javascript"></script>
<script src="/gmapviewer/resources/dragzoom.js" type="text/javascript"></script>
<script src="/gmapviewer/resources/gmapconfig.js" type="text/javascript"></script>
<script src="/gmapviewer/resources/gmapviewer.js" type="text/javascript"></script>
<% end %>

<div id="image_viewer">
  <% if @document.has_key?('reference_image_url_s') %>
  <img class="reference_image" id="reference_image" src="<%= @document['reference_image_url_s'] %>"/>
  <% end %>
  <script type="text/javascript">
  var viewer = null;

  jQuery(document).ready(function() {
    jQuery('#viewer').text('').css({'width': '600px', 'height': '850px'});
    viewer = new GMapViewer("viewer");
    viewer.setCopyright("", "");
    <% if alto_word_coordinates(@document).length > 0 %>
    viewer.wants_alto = true;
    <% end %>
    <% if @document.has_key?('viewer_url_s') %>
    viewer.loadImage("<%= @document['viewer_url_s'] %>");
    <% end %>
    <%= alto_word_coordinates(@document) %>
    jQuery('#reference_image').hide();
  });
  </script>
  <div id="viewer">test</div>
</div>
<% else %>
  <% extra_head_content << capture do %>
    <link rel="stylesheet" type="text/css" href="/stylesheets/oh.css" media="all">
  <% end %>
  <% if @document.has_key?('synchronization_url_s') %>
    <p class="oh_link">
    <%= link_to image_tag('/images/play.png', :id => 'viewer_play_button', :alt => 'Play oral history', :title => 'Play oral history'), oh_url(@document) %>
    </p>
  <% end %>
<% end %>
